[{"path":"https://setzler.github.io/DiDforBigData/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2023 Bradley Setzler Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://setzler.github.io/DiDforBigData/articles/DiDforBigData.html","id":"installation","dir":"Articles","previous_headings":"","what":"0. Installation","title":"Get Started","text":"","code":"devtools::install_github(\"setzler/DiDforBigData\") library(DiDforBigData)"},{"path":"https://setzler.github.io/DiDforBigData/articles/DiDforBigData.html","id":"prepare-data","dir":"Articles","previous_headings":"","what":"1. Prepare Data","title":"Get Started","text":"provide simple data simulator follows: real data needs “long” format, .e., need variables individual identifier (e.g. id), time variable (e.g. year), cohort treatment begins (e.g. cohort), outcome variable (e.g. Y). variables required. variables can names prefer. going estimation, need prepare list variable names:","code":"sim = SimDiD(sample_size = 400, seed=123)  # true ATTs in the simulation print(sim$true_ATT) #>      cohort event    ATTge #>  1:    2007     0 1.000000 #>  2:    2007     1 2.000000 #>  3:    2007     2 3.000000 #>  4:    2007     3 4.000000 #>  5:    2007     4 5.000000 #>  6:    2007     5 6.000000 #>  7:    2007     6 7.000000 #>  8:    2010     0 1.500000 #>  9:    2010     1 2.500000 #> 10:    2010     2 3.500000 #> 11:    2010     3 4.500000 #> 12:    2012     0 2.000000 #> 13:    2012     1 3.000000 #> 14: Average     0 1.501672 #> 15: Average     1 2.501672 #> 16: Average     2 3.251256 #> 17: Average     3 4.251256 #> 18: Average     4 5.000000 #> 19: Average     5 6.000000 #> 20: Average     6 7.000000  # simulated data simdata = sim$simdata print(simdata) #>        id year cohort         Y #>    1:   1 2003   2010  8.773933 #>    2:   1 2004   2010  9.846116 #>    3:   1 2005   2010  9.963274 #>    4:   1 2006   2010  9.997385 #>    5:   1 2007   2010 10.060080 #>   ---                           #> 4396: 400 2009   2007  8.035127 #> 4397: 400 2010   2007 14.438798 #> 4398: 400 2011   2007 11.973035 #> 4399: 400 2012   2007 13.033367 #> 4400: 400 2013   2007 13.552533 varnames = list() varnames$time_name = \"year\"  varnames$outcome_name = \"Y\" varnames$cohort_name = \"cohort\" varnames$id_name = \"id\""},{"path":"https://setzler.github.io/DiDforBigData/articles/DiDforBigData.html","id":"estimate-did-for-a-single-cohort","dir":"Articles","previous_headings":"","what":"2. Estimate DiD for a Single Cohort","title":"Get Started","text":"choose event time (+3) cohort treated units (2010), estimate : Comparing estimate true ATT , see estimation performed well. Note used -1 base year default. easy change.","code":"did_2010 = DiDge(inputdata = simdata, varnames = varnames,               cohort_time = 2010, event_postperiod = 3)  print(did_2010) #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2010         3        -1         2013 4.629839 0.1962355      101      100"},{"path":"https://setzler.github.io/DiDforBigData/articles/DiDforBigData.html","id":"estimate-did-for-all-cohorts-and-event-times","dir":"Articles","previous_headings":"","what":"3. Estimate DiD for All Cohorts and Event Times","title":"Get Started","text":"Suppose want estimate ATT event time -3 +5. can follows: output () list. One object list results_average, includes average ATT across cohorts: output () results_cohort, includes combinations event times cohorts. large print , let’s just print results event times 1 2: Note: simulated data ends 2013, event time 2 available treatment cohort 2012. take average across multiple event times, use Esets argument. accepts list, item vector event times average:","code":"did_all = DiD(inputdata = simdata, varnames = varnames, min_event = -3, max_event = 5) print(did_all$results_average) #>    EventTime BaseEvent        ATTe    ATTe_SE Ncontrol Ntreated #> 1:        -3        -1 -0.03472821 0.10802340      603      299 #> 2:        -2        -1 -0.06416254 0.09847063      603      299 #> 3:        -1        -1  0.00000000 0.00000000      603      299 #> 4:         0        -1  1.44852075 0.10387376      603      299 #> 5:         1        -1  2.67299583 0.09964407      603      299 #> 6:         2        -1  3.17946138 0.12477922      402      199 #> 7:         3        -1  4.27349270 0.12596253      302      199 #> 8:         4        -1  4.98423853 0.17470913      201       99 #> 9:         5        -1  5.66743134 0.21029573      101       99 print(did_all$results_cohort[EventTime==1 | EventTime==2]) #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         1        -1         2008 2.263430 0.1498733      301       99 #> 2:   2007         2        -1         2009 3.083096 0.1666782      301       99 #> 3:   2010         1        -1         2011 2.474058 0.1733037      201      100 #> 4:   2010         2        -1         2012 3.274863 0.1863323      101      100 #> 5:   2012         1        -1         2013 3.277404 0.2117916      101      100 did_all = DiD(inputdata = simdata, varnames = varnames, min_event = -3, max_event = 5,                Esets = list(c(1,2), c(1,2,3))) print(did_all$results_Esets) #>     Eset ATT_Eset ATT_Eset_SE #> 1:   1,2 2.882843  0.08653256 #> 2: 1,2,3 3.379711  0.08502520"},{"path":[]},{"path":"https://setzler.github.io/DiDforBigData/articles/Examples.html","id":"the-control_group-argument","dir":"Articles","previous_headings":"1. Choosing the Control Group","what":"The control_group argument","title":"Examples","text":"Depending empirical context, parallel-trends assumption may hold one possible control groups: \"never-treated\": control units never observed receiving treatment within sampling time frame. \"future-treated\": control units observed receiving treatment within sampling time frame. \"\": include “never-treated” “future-treated” groups. DiDforBigData makes easy choose among possibilities setting control_group argument function.","code":""},{"path":"https://setzler.github.io/DiDforBigData/articles/Examples.html","id":"example","dir":"Articles","previous_headings":"1. Choosing the Control Group","what":"Example","title":"Examples","text":"start simulating data work : can check true ATT simulated data. particular, let’s focus ATT Cohort 2007: also set variable names list DiDforBigData knows variable outcome, variable treatment cohort, etc.: Now, ready estimate . focus ATT 2007 cohort event times -3,…,5. Initially, control group set, function use default option control_group = \"\": now consider changing estimation use “never-treated” control group: Note sample size control group, Ncontrol, now substantially lower. Finally, consider changing use “future-treated” group: see , future-treated cohorts left event time +5, longer possible provide ATT estimate event time +5 using future-treated control group.","code":"sim = SimDiD(seed=123, sample_size = 1000) simdata = sim$simdata print(simdata) #>          id year cohort         Y #>     1:    1 2003   2012  9.556685 #>     2:    1 2004   2012 10.838554 #>     3:    1 2005   2012 10.639781 #>     4:    1 2006   2012 10.768935 #>     5:    1 2007   2012 10.613825 #>    ---                            #> 10996: 1000 2009   2010  6.640274 #> 10997: 1000 2010   2010 10.571372 #> 10998: 1000 2011   2010 11.282597 #> 10999: 1000 2012   2010 13.403816 #> 11000: 1000 2013   2010 12.542082 print(sim$true_ATT[cohort==2007]) #>    cohort event ATTge #> 1:   2007     0     1 #> 2:   2007     1     2 #> 3:   2007     2     3 #> 4:   2007     3     4 #> 5:   2007     4     5 #> 6:   2007     5     6 #> 7:   2007     6     7 varnames = list() varnames$time_name = \"year\"  varnames$outcome_name = \"Y\" varnames$cohort_name = \"cohort\" varnames$id_name = \"id\" did = DiD(inputdata = simdata, varnames = varnames, min_event = -3, max_event=5)  print(did$results_cohort[Cohort==2007]) #>    Cohort EventTime BaseEvent CalendarTime     ATTge   ATTge_SE Ncontrol #> 1:   2007        -3        -1         2004 0.2212255 0.10491102      751 #> 2:   2007        -2        -1         2005 0.1274586 0.10260112      751 #> 3:   2007        -1        -1         2006 0.0000000 0.00000000      751 #> 4:   2007         0        -1         2007 1.3464834 0.11215961      751 #> 5:   2007         1        -1         2008 2.2323825 0.09443787      751 #> 6:   2007         2        -1         2009 3.3705987 0.10350708      751 #> 7:   2007         3        -1         2010 4.2668717 0.10723955      501 #> 8:   2007         4        -1         2011 5.3241860 0.10738958      501 #> 9:   2007         5        -1         2012 6.1964127 0.13611288      251 #>    Ntreated #> 1:      249 #> 2:      249 #> 3:      249 #> 4:      249 #> 5:      249 #> 6:      249 #> 7:      249 #> 8:      249 #> 9:      249 did = DiD(inputdata = simdata, varnames = varnames,            control_group = \"never-treated\", min_event = -3, max_event=5)  print(did$results_cohort[Cohort==2007]) #>    Cohort EventTime BaseEvent CalendarTime       ATTge  ATTge_SE Ncontrol #> 1:   2007        -3        -1         2004  0.10444344 0.1269592      251 #> 2:   2007        -2        -1         2005 -0.05942059 0.1298412      251 #> 3:   2007        -1        -1         2006  0.00000000 0.0000000      251 #> 4:   2007         0        -1         2007  1.27025637 0.1322487      251 #> 5:   2007         1        -1         2008  2.15386918 0.1171451      251 #> 6:   2007         2        -1         2009  3.35116597 0.1288344      251 #> 7:   2007         3        -1         2010  4.11246994 0.1195819      251 #> 8:   2007         4        -1         2011  5.34013939 0.1225179      251 #> 9:   2007         5        -1         2012  6.19641269 0.1361129      251 #>    Ntreated #> 1:      249 #> 2:      249 #> 3:      249 #> 4:      249 #> 5:      249 #> 6:      249 #> 7:      249 #> 8:      249 #> 9:      249 did = DiD(inputdata = simdata, varnames = varnames,            control_group = \"future-treated\", min_event = -3, max_event=5)  print(did$results_cohort[Cohort==2007]) #>    Cohort EventTime BaseEvent CalendarTime     ATTge  ATTge_SE Ncontrol #> 1:   2007        -3        -1         2004 0.2798501 0.1117079      500 #> 2:   2007        -2        -1         2005 0.2212720 0.1081106      500 #> 3:   2007        -1        -1         2006 0.0000000 0.0000000      500 #> 4:   2007         0        -1         2007 1.3847494 0.1183855      500 #> 5:   2007         1        -1         2008 2.2717963 0.1022833      500 #> 6:   2007         2        -1         2009 3.3803539 0.1094793      500 #> 7:   2007         3        -1         2010 4.4218911 0.1294090      250 #> 8:   2007         4        -1         2011 5.3081689 0.1292680      250 #>    Ntreated #> 1:      249 #> 2:      249 #> 3:      249 #> 4:      249 #> 5:      249 #> 6:      249 #> 7:      249 #> 8:      249"},{"path":[]},{"path":"https://setzler.github.io/DiDforBigData/articles/Examples.html","id":"the-base_event-argument","dir":"Articles","previous_headings":"2. Avoiding anticipation","what":"The base_event argument","title":"Examples","text":"designs, researcher must choose base pre-period differences measured. natural choice base_event = -1, means use time period just treatment onset event time 0. discussed Callaway & Sant’Anna (2021), one possibility treatment group begins responding treatment prior treatment onset, called “anticipation.” anticipation begins period -1, differences measured relative base_event = -1 yield inconsistent estimates. Fortunately, easy solution: choose base pre-period anticipation began. seems reasonable assume treatment group anticipated treatment 3 years treatment onset, base_event = -3 free anticipation.","code":""},{"path":"https://setzler.github.io/DiDforBigData/articles/Examples.html","id":"example-1","dir":"Articles","previous_headings":"2. Avoiding anticipation","what":"Example","title":"Examples","text":"can simulate data subject anticipation using anticipation argument SimDiD function: Let’s focus average ATT across cohorts. two periods treatment effects prior treatment, can verify checking true ATT simulation: set varnames prepare estimation: estimate using default argument base_event = -1, estimate biased inconsistent: now set base_event = -3 avoid anticipation -1 -2: see estimate now close true ATT.","code":"sim = SimDiD(seed=123, sample_size = 200, anticipation = 2) simdata = sim$simdata print(simdata) #>        id year cohort         Y #>    1:   1 2003    Inf 11.238356 #>    2:   1 2004    Inf 11.520443 #>    3:   1 2005    Inf 13.252991 #>    4:   1 2006    Inf 11.940777 #>    5:   1 2007    Inf 13.120440 #>   ---                           #> 2196: 200 2009    Inf 10.250944 #> 2197: 200 2010    Inf  8.812227 #> 2198: 200 2011    Inf  9.926592 #> 2199: 200 2012    Inf 11.188476 #> 2200: 200 2013    Inf  9.270495 print(sim$true_ATT[cohort==\"Average\"]) #>     cohort event    ATTge #> 1: Average    -2 0.500000 #> 2: Average    -1 0.500000 #> 3: Average     0 1.503356 #> 4: Average     1 2.503356 #> 5: Average     2 3.252525 #> 6: Average     3 4.252525 #> 7: Average     4 5.000000 #> 8: Average     5 6.000000 #> 9: Average     6 7.000000 varnames = list() varnames$time_name = \"year\"  varnames$outcome_name = \"Y\" varnames$cohort_name = \"cohort\" varnames$id_name = \"id\" did = DiD(inputdata = simdata, varnames = varnames, min_event = -3, max_event=3)  print(did$results_average) #>    EventTime BaseEvent        ATTe   ATTe_SE Ncontrol Ntreated #> 1:        -3        -1 -0.52346600 0.1534229      303      149 #> 2:        -2        -1 -0.04556457 0.1380282      303      149 #> 3:        -1        -1  0.00000000 0.0000000      303      149 #> 4:         0        -1  0.75946293 0.1495045      303      149 #> 5:         1        -1  1.80044696 0.1392958      303      149 #> 6:         2        -1  2.50749407 0.1718781      202       99 #> 7:         3        -1  3.33212214 0.1917002      152       99 did = DiD(inputdata = simdata, varnames = varnames,            base_event = -3, min_event = -3, max_event=3)  print(did$results_average)  #>    EventTime BaseEvent      ATTe   ATTe_SE Ncontrol Ntreated #> 1:        -3        -3 0.0000000 0.0000000      303      149 #> 2:        -2        -3 0.4779014 0.1521152      303      149 #> 3:        -1        -3 0.5234660 0.1534229      303      149 #> 4:         0        -3 1.2829289 0.1441747      303      149 #> 5:         1        -3 2.3239130 0.1485972      303      149 #> 6:         2        -3 2.9653357 0.1643872      202       99 #> 7:         3        -3 3.8282455 0.1773802      152       99"},{"path":[]},{"path":"https://setzler.github.io/DiDforBigData/articles/Examples.html","id":"the-covariate_names-entry","dir":"Articles","previous_headings":"3. Controlling for Time-varying Covariates","what":"The covariate_names entry","title":"Examples","text":"sometimes worry treatment cohorts selected time-varying observables, time-varying observables also directly affect outcome. growth rate observables differs treatment control groups, creates violation parallel-trends assumption: treatment control groups experienced different growth profiles absence treatment due different observables. Fortunately, easy fix: Since confounding variables observable, just need control observables. DiDforBigData requires list variable names, varnames, modified include covariate_names entry. example, varnames$covariate_names = c(\"X1\",\"X2\") tells control linearly time-variation X1 X2.","code":""},{"path":"https://setzler.github.io/DiDforBigData/articles/Examples.html","id":"example-2","dir":"Articles","previous_headings":"3. Controlling for Time-varying Covariates","what":"Example","title":"Examples","text":"option SimDiD() add couple covariates. two covariates, X1 X2. particular, X2 differs growth rates across treatment cohorts, means causes violations parallel trends controlled. set varnames prepare estimation, ignoring covariates now: verify gives wrong answer cohort 2007: control linearly X1 X2, just need add covariate_names argument varnames: Now check controls time-variation X1 X2: see bias removed thanks control variables.","code":"sim = SimDiD(sample_size=1000, time_covars=TRUE) simdata = sim$simdata print(simdata) #>          id year cohort         Y          X1           X2 #>     1:    1 2003   2007 11.763806 -5.28713552 -0.546247081 #>     2:    1 2004   2007 14.216536 -3.16836592  0.882383754 #>     3:    1 2005   2007 12.898204 -3.52698674 -0.007446627 #>     4:    1 2006   2007 14.117949 -3.83264390 -0.307454720 #>     5:    1 2007   2007  9.932859  0.04643156  0.153863150 #>    ---                                                     #> 10996: 1000 2009   2010 10.096541 -0.96662668 -0.375274801 #> 10997: 1000 2010   2010  6.679059  4.38379275  0.229111354 #> 10998: 1000 2011   2010  8.328832  4.11630763  0.242690466 #> 10999: 1000 2012   2010  9.171007  3.05442888  2.269272560 #> 11000: 1000 2013   2010  9.044345  4.46350435  0.510888022  print(sim$true_ATT[cohort==2007]) #>    cohort event ATTge #> 1:   2007     0     1 #> 2:   2007     1     2 #> 3:   2007     2     3 #> 4:   2007     3     4 #> 5:   2007     4     5 #> 6:   2007     5     6 #> 7:   2007     6     7 varnames = list() varnames$time_name = \"year\"  varnames$outcome_name = \"Y\" varnames$cohort_name = \"cohort\" varnames$id_name = \"id\" did = DiD(inputdata = simdata, varnames = varnames, min_event = -3, max_event=5)  print(did$results_cohort[Cohort==2007]) #>    Cohort EventTime BaseEvent CalendarTime     ATTge  ATTge_SE Ncontrol #> 1:   2007        -3        -1         2004 0.1677000 0.1877317      751 #> 2:   2007        -2        -1         2005 0.2901911 0.1778623      751 #> 3:   2007        -1        -1         2006 0.0000000 0.0000000      751 #> 4:   2007         0        -1         2007 1.1509604 0.1816170      751 #> 5:   2007         1        -1         2008 2.8765749 0.1862649      751 #> 6:   2007         2        -1         2009 4.3001933 0.1904476      751 #> 7:   2007         3        -1         2010 5.4489463 0.2012098      501 #> 8:   2007         4        -1         2011 6.8211665 0.1907504      501 #> 9:   2007         5        -1         2012 7.9496252 0.2256687      251 #>    Ntreated #> 1:      249 #> 2:      249 #> 3:      249 #> 4:      249 #> 5:      249 #> 6:      249 #> 7:      249 #> 8:      249 #> 9:      249 varnames$covariate_names = c(\"X1\",\"X2\") did = DiD(inputdata = simdata, varnames = varnames, min_event = -3, max_event=5)  print(did$results_cohort[Cohort==2007]) #>    Cohort EventTime BaseEvent CalendarTime      ATTge  ATTge_SE Ncontrol #> 1:   2007        -3        -1         2004 -0.1225027 0.1074379      751 #> 2:   2007        -2        -1         2005  0.1021934 0.1042450      751 #> 3:   2007        -1        -1         2006  0.0000000 0.0000000      751 #> 4:   2007         0        -1         2007  0.9427569 0.1066192      751 #> 5:   2007         1        -1         2008  2.0692206 0.1117700      751 #> 6:   2007         2        -1         2009  2.8921399 0.1144014      751 #> 7:   2007         3        -1         2010  3.9086404 0.1233646      501 #> 8:   2007         4        -1         2011  5.1380269 0.1275067      501 #> 9:   2007         5        -1         2012  5.9657885 0.1503580      251 #>    Ntreated #> 1:      249 #> 2:      249 #> 3:      249 #> 4:      249 #> 5:      249 #> 6:      249 #> 7:      249 #> 8:      249 #> 9:      249"},{"path":[]},{"path":"https://setzler.github.io/DiDforBigData/articles/Examples.html","id":"the-cluster_names-entry","dir":"Articles","previous_headings":"4. Robust and Clustered Standard Errors","what":"The cluster_names entry","title":"Examples","text":"default, package always provides heteroskedasticity-robust standard errors. However, difference--differences applications, often case treatment assigned groups individuals (e.g., change state-wide policy treats individuals state simultaneously). groups also subject common shocks, induces correlation estimation errors within cluster, standard errors tend small. Fortunately, easy fix: groups within estimation errors correlated known researcher, just need cluster standard errors group. DiDforBigData requires list variable names, varnames, modified include cluster_names entry. example, varnames$cluster_names = c(\"group1\",\"group2\") tells use multi-way clustering way accounts common shocks observable groups, “group1” “group2”. Note: estimating regression combines multiple treatment cohorts /multiple event times, necessary always cluster unit (individual). DiDforBigData adds clustering default.","code":""},{"path":"https://setzler.github.io/DiDforBigData/articles/Examples.html","id":"example-3","dir":"Articles","previous_headings":"4. Robust and Clustered Standard Errors","what":"Example","title":"Examples","text":"option SimDiD() using clusters=TRUE group individuals bins differentially selected treatment also face common shocks within bin: set varnames prepare estimation: check usual standard errors, clustered unit based varnames$id_name default: Next, cluster “cluster” variable adding varnames re-estimating:","code":"sim = SimDiD(sample_size=1000, clusters = TRUE) simdata = sim$simdata print(simdata) #>          id year cohort         Y cluster #>     1:    1 2003   2007  8.266417       9 #>     2:    1 2004   2007 12.657646       9 #>     3:    1 2005   2007  9.373441       9 #>     4:    1 2006   2007 10.851528       9 #>     5:    1 2007   2007  9.306055       9 #>    ---                                    #> 10996: 1000 2009   2010 10.317600       6 #> 10997: 1000 2010   2010  9.623423       6 #> 10998: 1000 2011   2010 11.509660       6 #> 10999: 1000 2012   2010  9.718423       6 #> 11000: 1000 2013   2010 11.042858       6  print(sim$true_ATT[cohort==\"Average\"]) #>     cohort event    ATTge #> 1: Average     0 1.500668 #> 2: Average     1 2.500668 #> 3: Average     2 3.250501 #> 4: Average     3 4.250501 #> 5: Average     4 5.000000 #> 6: Average     5 6.000000 #> 7: Average     6 7.000000 varnames = list() varnames$time_name = \"year\"  varnames$outcome_name = \"Y\" varnames$cohort_name = \"cohort\" varnames$id_name = \"id\" did = DiD(inputdata = simdata, varnames = varnames, min_event = -1, max_event=3)  print(did$results_average) #>    EventTime BaseEvent     ATTe    ATTe_SE Ncontrol Ntreated #> 1:        -1        -1 0.000000 0.00000000     1503      749 #> 2:         0        -1 1.654672 0.07813674     1503      749 #> 3:         1        -1 2.710981 0.09333436     1503      749 #> 4:         2        -1 3.319803 0.11998209     1002      499 #> 5:         3        -1 4.597428 0.12376782      752      499 varnames$cluster_names = \"cluster\"   did = DiD(inputdata = copy(simdata), varnames = varnames, min_event = -1, max_event=3)  print(did$results_average) #>    EventTime BaseEvent     ATTe    ATTe_SE Ncontrol Ntreated #> 1:        -1        -1 0.000000 0.00000000     1503      749 #> 2:         0        -1 1.654672 0.08714482     1503      749 #> 3:         1        -1 2.710981 0.11885828     1503      749 #> 4:         2        -1 3.319803 0.13355642     1002      499 #> 5:         3        -1 4.597428 0.25745379      752      499"},{"path":"https://setzler.github.io/DiDforBigData/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Bradley Setzler. Author, maintainer.","code":""},{"path":"https://setzler.github.io/DiDforBigData/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Setzler B (2023). DiDforBigData: Big Data Implementation Difference--differences Estimation Staggered Treatment. R package version 0.3, https://setzler.github.io/DiDforBigData/.","code":"@Manual{,   title = {DiDforBigData: A Big Data Implementation of Difference-in-differences Estimation with Staggered Treatment},   author = {Bradley Setzler},   year = {2023},   note = {R package version 0.3},   url = {https://setzler.github.io/DiDforBigData/}, }"},{"path":"https://setzler.github.io/DiDforBigData/index.html","id":"did-for-big-data-in-r","dir":"","previous_headings":"","what":"A Big Data Implementation of Difference-in-differences Estimation with Staggered Treatment","title":"A Big Data Implementation of Difference-in-differences Estimation with Staggered Treatment","text":"R package provides big-data-friendly memory-efficient difference--differences () estimator staggered (non-staggered) treatment contexts. supports controlling time-varying covariates, heteroskedasticity-robust standard errors, (single multi-way) clustered standard errors. See Roth, Sant’Anna, Bilinksi, Poe (2022) background staggered .","code":""},{"path":"https://setzler.github.io/DiDforBigData/index.html","id":"id_1-why-do-we-need-a-staggered-did-package-for-big-data","dir":"","previous_headings":"","what":"1. Why do we need a staggered DiD package for big data?","title":"A Big Data Implementation of Difference-in-differences Estimation with Staggered Treatment","text":"Recently, noticed pattern seminars conferences: presenters acknowledge use staggered estimator, say infeasible context due large sample size. check, wrote simple panel data simulator staggered treatment roll-heterogeneous treatment effects, simulated large samples, applied popular R packages staggered estimation: didimputation implementing approach Borusyak, Jaravel, Spiess (2022); implementing approach Callaway & Sant’Anna (2021); DIDmultiplegt implementing approach de Chaisemartin & D’Haultfoeuille (2020). found successfully estimate staggered 100,000 unique individuals, took . many applications consider small number unique individuals (e.g. state-level analysis 50 states), designs household-level firm-level using administrative data often involve millions unique individuals.","code":""},{"path":"https://setzler.github.io/DiDforBigData/index.html","id":"id_2-this-package","dir":"","previous_headings":"","what":"2. This package","title":"A Big Data Implementation of Difference-in-differences Estimation with Staggered Treatment","text":"wrote DiDforBigData address 4 issues arise context large administrative datasets: Speed: less 1 minute, DiDforBigData provide estimation inference staggered millions observations personal laptop. orders magnitude faster available software sample size large. Memory: Administrative data often stored crowded servers limited memory available researchers use. DiDforBigData helps using much less memory software. Dependencies: Administrative servers often outside internet access, making difficult install dependencies. package two dependencies, data.table big data management sandwich robust standard error estimation, already installed R distributions. Optionally, use fixest package speed estimation installed. progress package installed, also provide progress bar know much longer estimation take. Parallelization: Administrative servers often large number available processors, processor may slow, important parallelize. DiDforBigData makes parallelization easy long parallel package installed.","code":""},{"path":"https://setzler.github.io/DiDforBigData/index.html","id":"id_3-demonstration","dir":"","previous_headings":"","what":"3. Demonstration","title":"A Big Data Implementation of Difference-in-differences Estimation with Staggered Treatment","text":"section compare didimputation, (using default option well bstrap=F option), DIDmultiplegt (option brep=40), DiDforBigData R. draw simulated data 3 times per sample size, apply estimator. Results presented median across 3 draws. Sample Size refers number unique individuals. Since 10 simulated years data, sample balanced across years, number observations 10 times number unique individuals. Replication code available .","code":""},{"path":"https://setzler.github.io/DiDforBigData/index.html","id":"id_31-point-estimates","dir":"","previous_headings":"3. Demonstration","what":"3.1 Point estimates","title":"A Big Data Implementation of Difference-in-differences Estimation with Staggered Treatment","text":"verify estimators provide similar point estimates standard errors. , show point estimates 95% confidence intervals (using +/- 1.96*SE) estimate event time +1 (averaging across cohorts). true ATT 4 event time +1. also verify two-way fixed-effects OLS estimation find effect 5.5 event time +1 sample large.  caveat: provides standard errors correspond multiple-hypothesis testing thus tend wider single-hypothesis standard errors provided didimputation DiDforBigData.","code":""},{"path":"https://setzler.github.io/DiDforBigData/index.html","id":"id_32-speed-test","dir":"","previous_headings":"3. Demonstration","what":"3.2 Speed test","title":"A Big Data Implementation of Difference-in-differences Estimation with Staggered Treatment","text":"Small Samples: run-time required complete estimation using package:  see , 20,000 unique individuals, didimpute DIDmultiplegt become slow. get either approach run successfully 100,000 unique individuals, crash R. contrast, DiDforBigData fast can barely seen plot. Large samples: Given failure didimpute DIDmultiplegt 100,000 observations, now restrict attention DiDforBigData. consider much larger samples:  Even 1 million unique individuals (10 million observations), difficult see DiDforBigData plot, estimation requires half minute, versus nearly 1 hour . Thus, DiDforBigData roughly two orders magnitude faster working sample one million individuals.","code":""},{"path":"https://setzler.github.io/DiDforBigData/index.html","id":"id_33-memory-test","dir":"","previous_headings":"3. Demonstration","what":"3.3 Memory test","title":"A Big Data Implementation of Difference-in-differences Estimation with Staggered Treatment","text":"Small Samples: memory used complete estimation package:  see DIDmultiplegt uses much memory approaches. approaches use relatively little memory sample sizes. Large Samples:  considering large samples, see DiDforBigData uses less quarter memory used .","code":""},{"path":"https://setzler.github.io/DiDforBigData/index.html","id":"id_4-using-didforbigdata","dir":"","previous_headings":"","what":"4. Using DiDforBigData","title":"A Big Data Implementation of Difference-in-differences Estimation with Staggered Treatment","text":"install package: use package installed: Set variable list names variables: estimate single cohort event time, use DiDge command. example: detailed manual explaining various features available DiDge available running command: estimate many cohorts event times, use command. example: detailed manual explaining various features available available running command: information, read following articles: Get Started Function Documentation Detailed Examples","code":"devtools::install_github(\"setzler/DiDforBigData\") library(DiDforBigData) varnames = list() varnames$time_name = \"year\" varnames$outcome_name = \"Y\" varnames$cohort_name = \"cohort\" varnames$id_name = \"id\" DiDge(inputdata = yourdata, varnames = varnames,              cohort_time = 2010, event_postperiod = 3) ?DiDge DiD(inputdata = yourdata, varnames = varnames,     min_event = -3, max_event = 5) ?DiD"},{"path":"https://setzler.github.io/DiDforBigData/reference/DiD.html","id":null,"dir":"Reference","previous_headings":"","what":"Combine DiD estimates across cohorts and event times. — DiD","title":"Combine DiD estimates across cohorts and event times. — DiD","text":"Estimate possible cohorts event time pairs (g,e), well average across cohorts event time (e).","code":""},{"path":"https://setzler.github.io/DiDforBigData/reference/DiD.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Combine DiD estimates across cohorts and event times. — DiD","text":"","code":"DiD(   inputdata,   varnames,   control_group = \"all\",   base_event = -1,   min_event = NULL,   max_event = NULL,   Esets = NULL,   return_ATTs_only = TRUE,   parallel_cores = 1 )"},{"path":"https://setzler.github.io/DiDforBigData/reference/DiD.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Combine DiD estimates across cohorts and event times. — DiD","text":"inputdata data.table. varnames list form varnames = list(id_name, time_name, outcome_name, cohort_name), four arguments list must character corresponds variable name inputdata. control_group three possibilities: control_group=\"never-treated\" uses never-treated control group ; control_group=\"future-treated\" uses units receive treatment future control group; control_group=\"\" uses never-treated future-treated control group. Default control_group=\"\". base_event base pre-period normalized zero estimation. Default base_event=-1. min_event minimum event time (e) estimate. Default NULL, case, minimum imposed. max_event maximum event time (e) estimate. Default NULL, case, maximum imposed. Esets list sets event times provided, loop sets, computing average ATT_e across event times e. Default NULL. return_ATTs_only Return ATT estimates sample sizes. Default TRUE. parallel_cores Number cores use parallel processing. greater 1, try run library(parallel), \"parallel\" package must installed. Default 1.","code":""},{"path":"https://setzler.github.io/DiDforBigData/reference/DiD.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Combine DiD estimates across cohorts and event times. — DiD","text":"list two components: results_cohort data.table DiDge estimates (event e cohort g), results_average data.table DiDe estimates (event e, average across cohorts g).","code":""},{"path":"https://setzler.github.io/DiDforBigData/reference/DiD.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Combine DiD estimates across cohorts and event times. — DiD","text":"","code":"# simulate some data simdata = SimDiD(sample_size=1000, ATTcohortdiff = 2)$simdata  # define the variable names as a list() varnames = list() varnames$time_name = \"year\" varnames$outcome_name = \"Y\" varnames$cohort_name = \"cohort\" varnames$id_name = \"id\"  # estimate the ATT for all cohorts at event time 1 only DiD(simdata, varnames, min_event=1, max_event=1) #> $results_cohort #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         1        -1         2008 2.080520 0.1113721      751      249 #> 2:   2010         1        -1         2011 4.074317 0.1066090      501      250 #> 3:   2012         1        -1         2013 6.090972 0.1207522      251      250 #>  #> $results_average #>    EventTime BaseEvent     ATTe    ATTe_SE Ncontrol Ntreated #> 1:         1        -1 4.084608 0.06615348     1503      749 #>   # change the base period to -3 DiD(simdata, varnames, base_event=-3, min_event=1, max_event=1) #> $results_cohort #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         1        -3         2008 2.202747 0.1011322      751      249 #> 2:   2010         1        -3         2011 3.873898 0.1090590      501      250 #> 3:   2012         1        -3         2013 6.159048 0.1361621      251      250 #>  #> $results_average #>    EventTime BaseEvent     ATTe    ATTe_SE Ncontrol Ntreated #> 1:         1        -3 4.081069 0.06731803     1503      749 #>   # check the pre-periods -4 through -2 DiD(simdata, varnames, control_group = \"never-treated\", min_event=-4, max_event=-2) #> $results_cohort #>    Cohort EventTime BaseEvent CalendarTime        ATTge  ATTge_SE Ncontrol #> 1:   2007        -4        -1         2003 -0.006368097 0.1265188      251 #> 2:   2007        -3        -1         2004 -0.001150727 0.1280774      251 #> 3:   2007        -2        -1         2005  0.185373922 0.1248511      251 #> 4:   2010        -4        -1         2006  0.092126680 0.1310240      251 #> 5:   2010        -3        -1         2007  0.158665767 0.1320550      251 #> 6:   2010        -2        -1         2008  0.287904081 0.1258577      251 #> 7:   2012        -4        -1         2008  0.133280149 0.1207528      251 #> 8:   2012        -3        -1         2009 -0.068076369 0.1330084      251 #> 9:   2012        -2        -1         2010 -0.128911662 0.1210347      251 #>    Ntreated #> 1:      249 #> 2:      249 #> 3:      249 #> 4:      250 #> 5:      250 #> 6:      250 #> 7:      250 #> 8:      250 #> 9:      250 #>  #> $results_average #>    EventTime BaseEvent       ATTe    ATTe_SE Ncontrol Ntreated #> 1:        -4        -1 0.07311889 0.06736954      753      749 #> 2:        -3        -1 0.02985423 0.06616998      753      749 #> 3:        -2        -1 0.11469454 0.07116391      753      749 #>   # use only the never-treated control group, estimate events -4 through 1 DiD(simdata, varnames, control_group = \"never-treated\", min_event=-4, max_event=1) #> $results_cohort #>     Cohort EventTime BaseEvent CalendarTime        ATTge  ATTge_SE Ncontrol #>  1:   2007        -4        -1         2003 -0.006368097 0.1265188      251 #>  2:   2007        -3        -1         2004 -0.001150727 0.1280774      251 #>  3:   2007        -2        -1         2005  0.185373922 0.1248511      251 #>  4:   2007        -1        -1         2006  0.000000000 0.0000000      251 #>  5:   2007         0        -1         2007  0.952907181 0.1291093      251 #>  6:   2007         1        -1         2008  2.236676273 0.1303068      251 #>  7:   2010        -4        -1         2006  0.092126680 0.1310240      251 #>  8:   2010        -3        -1         2007  0.158665767 0.1320550      251 #>  9:   2010        -2        -1         2008  0.287904081 0.1258577      251 #> 10:   2010        -1        -1         2009  0.000000000 0.0000000      251 #> 11:   2010         0        -1         2010  2.983597405 0.1286926      251 #> 12:   2010         1        -1         2011  4.108286869 0.1264383      251 #> 13:   2012        -4        -1         2008  0.133280149 0.1207528      251 #> 14:   2012        -3        -1         2009 -0.068076369 0.1330084      251 #> 15:   2012        -2        -1         2010 -0.128911662 0.1210347      251 #> 16:   2012        -1        -1         2011  0.000000000 0.0000000      251 #> 17:   2012         0        -1         2012  4.881242047 0.1282893      251 #> 18:   2012         1        -1         2013  6.090971782 0.1207522      251 #>     Ntreated #>  1:      249 #>  2:      249 #>  3:      249 #>  4:      249 #>  5:      249 #>  6:      249 #>  7:      250 #>  8:      250 #>  9:      250 #> 10:      250 #> 11:      250 #> 12:      250 #> 13:      250 #> 14:      250 #> 15:      250 #> 16:      250 #> 17:      250 #> 18:      250 #>  #> $results_average #>    EventTime BaseEvent       ATTe    ATTe_SE Ncontrol Ntreated #> 1:        -4        -1 0.07311889 0.06736954      753      749 #> 2:        -3        -1 0.02985423 0.06616998      753      749 #> 3:        -2        -1 0.11469454 0.07116391      753      749 #> 4:        -1        -1 0.00000000 0.00000000      753      749 #> 5:         0        -1 2.94190087 0.07480281      753      749 #> 6:         1        -1 4.14785989 0.06824073      753      749 #>   # use only the future treated control group, estimate events -4 through 1 DiD(simdata, varnames, control_group = \"future-treated\", min_event=-4, max_event=1) #> $results_cohort #>     Cohort EventTime BaseEvent CalendarTime       ATTge  ATTge_SE Ncontrol #>  1:   2007        -4        -1         2003 -0.05689013 0.1121286      500 #>  2:   2007        -3        -1         2004 -0.18300636 0.1128639      500 #>  3:   2007        -2        -1         2005  0.04403889 0.1097589      500 #>  4:   2007        -1        -1         2006  0.00000000 0.0000000      500 #>  5:   2007         0        -1         2007  0.92549431 0.1119171      500 #>  6:   2007         1        -1         2008  2.00212977 0.1171350      500 #>  7:   2010        -4        -1         2006  0.16408576 0.1265048      250 #>  8:   2010        -3        -1         2007  0.24233820 0.1251974      250 #>  9:   2010        -2        -1         2008  0.08654756 0.1240512      250 #> 10:   2010        -1        -1         2009  0.00000000 0.0000000      250 #> 11:   2010         0        -1         2010  3.04443270 0.1277939      250 #> 12:   2010         1        -1         2011  4.04021050 0.1249598      250 #>     Ntreated #>  1:      249 #>  2:      249 #>  3:      249 #>  4:      249 #>  5:      249 #>  6:      249 #>  7:      250 #>  8:      250 #>  9:      250 #> 10:      250 #> 11:      250 #> 12:      250 #>  #> $results_average #>    EventTime BaseEvent       ATTe    ATTe_SE Ncontrol Ntreated #> 1:        -4        -1 0.05381923 0.08488237      750      499 #> 2:        -3        -1 0.03009212 0.08215192      750      499 #> 3:        -2        -1 0.06533582 0.08285960      750      499 #> 4:        -1        -1 0.00000000 0.00000000      750      499 #> 5:         0        -1 1.98708669 0.08361197      750      499 #> 6:         1        -1 3.02321230 0.08598933      750      499 #>   # estimate average ATTe across sets of events DiD(simdata, varnames, min_event=-4, max_event=6, Esets=list(c(-4,-3,-2),c(1,2,3))) #> $results_cohort #>     Cohort EventTime BaseEvent CalendarTime       ATTge  ATTge_SE Ncontrol #>  1:   2007        -4        -1         2003 -0.04000461 0.1063722      751 #>  2:   2007        -3        -1         2004 -0.12222638 0.1067716      751 #>  3:   2007        -2        -1         2005  0.09127603 0.1032551      751 #>  4:   2007        -1        -1         2006  0.00000000 0.0000000      751 #>  5:   2007         0        -1         2007  0.93465627 0.1059910      751 #>  6:   2007         1        -1         2008  2.08052015 0.1113721      751 #>  7:   2007         2        -1         2009  2.89977611 0.1046816      751 #>  8:   2007         3        -1         2010  3.94963207 0.1143283      501 #>  9:   2007         4        -1         2011  5.06524420 0.1152643      501 #> 10:   2007         5        -1         2012  6.04106888 0.1238934      251 #> 11:   2007         6        -1         2013  7.00871764 0.1287452      251 #> 12:   2010        -4        -1         2006  0.12803440 0.1103934      501 #> 13:   2010        -3        -1         2007  0.20041848 0.1091284      501 #> 14:   2010        -2        -1         2008  0.18742678 0.1064162      501 #> 15:   2010        -1        -1         2009  0.00000000 0.0000000      501 #> 16:   2010         0        -1         2010  3.01395434 0.1089320      501 #> 17:   2010         1        -1         2011  4.07431662 0.1066090      501 #> 18:   2010         2        -1         2012  5.02530306 0.1316073      251 #> 19:   2010         3        -1         2013  6.11411205 0.1290900      251 #> 20:   2012        -4        -1         2008  0.13328015 0.1207528      251 #> 21:   2012        -3        -1         2009 -0.06807637 0.1330084      251 #> 22:   2012        -2        -1         2010 -0.12891166 0.1210347      251 #> 23:   2012        -1        -1         2011  0.00000000 0.0000000      251 #> 24:   2012         0        -1         2012  4.88124205 0.1282893      251 #> 25:   2012         1        -1         2013  6.09097178 0.1207522      251 #>     Cohort EventTime BaseEvent CalendarTime       ATTge  ATTge_SE Ncontrol #>     Ntreated #>  1:      249 #>  2:      249 #>  3:      249 #>  4:      249 #>  5:      249 #>  6:      249 #>  7:      249 #>  8:      249 #>  9:      249 #> 10:      249 #> 11:      249 #> 12:      250 #> 13:      250 #> 14:      250 #> 15:      250 #> 16:      250 #> 17:      250 #> 18:      250 #> 19:      250 #> 20:      250 #> 21:      250 #> 22:      250 #> 23:      250 #> 24:      250 #> 25:      250 #>     Ntreated #>  #> $results_average #>     EventTime BaseEvent        ATTe    ATTe_SE Ncontrol Ntreated #>  1:        -4        -1 0.073921885 0.06558170     1503      749 #>  2:        -3        -1 0.003539596 0.06519249     1503      749 #>  3:        -2        -1 0.049875181 0.06320729     1503      749 #>  4:        -1        -1 0.000000000 0.00000000     1503      749 #>  5:         0        -1 2.945965965 0.06603599     1503      749 #>  6:         1        -1 4.084608302 0.06615348     1503      749 #>  7:         2        -1 3.964669375 0.08260010     1002      499 #>  8:         3        -1 5.034040875 0.08637273      752      499 #>  9:         4        -1 5.065244197 0.11526433      501      249 #> 10:         5        -1 6.041068883 0.12389338      251      249 #> 11:         6        -1 7.008717639 0.12874515      251      249 #>  #> $results_Esets #>        Eset   ATT_Eset ATT_Eset_SE #> 1: -4,-3,-2 0.04244555  0.05245430 #> 2:    1,2,3 4.18897766  0.06019071 #>   # estimate average ATTe in parallel # not run: # DiD(simdata, varnames, min_event=-4, max_event=6, parallel_cores=4)  # simulate data with missing values, re-run estimation simdata = SimDiD(sample_size=1000, ATTcohortdiff = 2, randomNA = TRUE)$simdata DiD(simdata, varnames, min_event=-4, max_event=6, Esets=list(c(-4,-3,-2),c(1,2,3))) #> Warning: 182 out of 2000 observations dropped due to missing values #> Warning: 199 out of 2000 observations dropped due to missing values #> Warning: 184 out of 2000 observations dropped due to missing values #> Warning: 94 out of 1000 observations dropped due to missing values #> Warning: 177 out of 2000 observations dropped due to missing values #> Warning: 199 out of 2000 observations dropped due to missing values #> Warning: 194 out of 2000 observations dropped due to missing values #> Warning: 198 out of 2000 observations dropped due to missing values #> Warning: 199 out of 2000 observations dropped due to missing values #> Warning: 175 out of 2000 observations dropped due to missing values #> Warning: 180 out of 2000 observations dropped due to missing values #> Warning: 194 out of 2000 observations dropped due to missing values #> Warning: 183 out of 2000 observations dropped due to missing values #> Warning: 205 out of 2000 observations dropped due to missing values #> Warning: 100 out of 1000 observations dropped due to missing values #> Warning: 204 out of 2000 observations dropped due to missing values #> Warning: 205 out of 2000 observations dropped due to missing values #> Warning: 181 out of 2000 observations dropped due to missing values #> Warning: 186 out of 2000 observations dropped due to missing values #> Warning: 210 out of 2000 observations dropped due to missing values #> Warning: 205 out of 2000 observations dropped due to missing values #> Warning: 209 out of 2000 observations dropped due to missing values #> Warning: 105 out of 1000 observations dropped due to missing values #> Warning: 186 out of 2000 observations dropped due to missing values #> Warning: 191 out of 2000 observations dropped due to missing values #> $results_cohort #>     Cohort EventTime BaseEvent CalendarTime        ATTge  ATTge_SE Ncontrol #>  1:   2007        -4        -1         2003 -0.156569000 0.1130326      615 #>  2:   2007        -3        -1         2004 -0.187093707 0.1168353      608 #>  3:   2007        -2        -1         2005  0.049104994 0.1155313      615 #>  4:   2007        -1        -1         2006  0.000000000 0.0000000      674 #>  5:   2007         0        -1         2007  0.839641719 0.1095383      615 #>  6:   2007         1        -1         2008  2.030712189 0.1205356      603 #>  7:   2007         2        -1         2009  2.923358864 0.1145547      606 #>  8:   2007         3        -1         2010  3.956807530 0.1247692      396 #>  9:   2007         4        -1         2011  5.087353348 0.1243630      391 #> 10:   2007         5        -1         2012  6.004554866 0.1364769      211 #> 11:   2007         6        -1         2013  6.994286331 0.1402227      209 #> 12:   2010        -4        -1         2006  0.127314276 0.1216177      401 #> 13:   2010        -3        -1         2007  0.241683923 0.1197218      415 #> 14:   2010        -2        -1         2008  0.132497405 0.1188868      402 #> 15:   2010        -1        -1         2009  0.000000000 0.0000000      452 #> 16:   2010         0        -1         2010  3.029745522 0.1232936      402 #> 17:   2010         1        -1         2011  4.072036650 0.1176543      392 #> 18:   2010         2        -1         2012  5.036397197 0.1504915      207 #> 19:   2010         3        -1         2013  6.018658151 0.1410853      204 #> 20:   2012        -4        -1         2008  0.146775748 0.1385533      192 #> 21:   2012        -3        -1         2009 -0.006075544 0.1491686      195 #> 22:   2012        -2        -1         2010 -0.170970391 0.1396990      197 #> 23:   2012        -1        -1         2011  0.000000000 0.0000000      221 #> 24:   2012         0        -1         2012  4.899606432 0.1445298      205 #> 25:   2012         1        -1         2013  6.067493775 0.1325285      204 #>     Cohort EventTime BaseEvent CalendarTime        ATTge  ATTge_SE Ncontrol #>     Ntreated #>  1:      211 #>  2:      206 #>  3:      209 #>  4:      232 #>  5:      213 #>  6:      206 #>  7:      207 #>  8:      213 #>  9:      213 #> 10:      215 #> 11:      211 #> 12:      205 #> 13:      202 #> 14:      206 #> 15:      226 #> 16:      204 #> 17:      205 #> 18:      205 #> 19:      207 #> 20:      199 #> 21:      197 #> 22:      190 #> 23:      217 #> 24:      201 #> 25:      197 #>     Ntreated #>  #> $results_average #>     EventTime BaseEvent        ATTe    ATTe_SE Ncontrol Ntreated #>  1:        -4        -1 0.036214214 0.07209513     1208      615 #>  2:        -3        -1 0.015011515 0.07227829     1218      605 #>  3:        -2        -1 0.008385182 0.07071937     1214      605 #>  4:        -1        -1 0.000000000 0.00000000     1347      675 #>  5:         0        -1 2.883062565 0.07314817     1222      618 #>  6:         1        -1 4.026958056 0.07253609     1199      608 #>  7:         2        -1 3.974749297 0.09284070      813      412 #>  8:         3        -1 4.973005336 0.09458020      600      420 #>  9:         4        -1 5.087353348 0.12436303      391      213 #> 10:         5        -1 6.004554866 0.13647692      211      215 #> 11:         6        -1 6.994286331 0.14022266      209      211 #>  #> $results_Esets #>        Eset   ATT_Eset ATT_Eset_SE #> 1: -4,-3,-2 0.02138553  0.05704485 #> 2:    1,2,3 4.16661402  0.06443916 #>   # simulate data with missing cohort, re-run estimation simdata = SimDiD(sample_size=1000, ATTcohortdiff = 2, missingCohorts=2010)$simdata DiD(simdata, varnames, min_event=-4, max_event=6, Esets=list(c(-4,-3,-2),c(1,2,3))) #> Warning: 250 out of 2000 observations dropped due to missing values #> Warning: 250 out of 2000 observations dropped due to missing values #> The variable 'treated' has been removed because of collinearity (see $collin.var). #> Warning: 250 out of 2000 observations dropped due to missing values #> The variable 'treated' has been removed because of collinearity (see $collin.var). #> Warning: 250 out of 2000 observations dropped due to missing values #> The variable 'treated' has been removed because of collinearity (see $collin.var). #> Warning: 250 out of 1000 observations dropped due to missing values #> Warning: 250 out of 2000 observations dropped due to missing values #> The variable 'treated' has been removed because of collinearity (see $collin.var). #> Warning: 250 out of 2000 observations dropped due to missing values #> The variable 'treated' has been removed because of collinearity (see $collin.var). #> Warning: 250 out of 2000 observations dropped due to missing values #> The variable 'treated' has been removed because of collinearity (see $collin.var). #> Warning: 250 out of 2000 observations dropped due to missing values #> The variable 'treated' has been removed because of collinearity (see $collin.var). #> Warning: 250 out of 2000 observations dropped due to missing values #> $results_cohort #>     Cohort EventTime BaseEvent CalendarTime       ATTge  ATTge_SE Ncontrol #>  1:   2007        -4        -1         2003 -0.04000461 0.1063722      751 #>  2:   2007        -3        -1         2004 -0.12222638 0.1067716      751 #>  3:   2007        -2        -1         2005  0.09127603 0.1032551      751 #>  4:   2007        -1        -1         2006  0.00000000 0.0000000      751 #>  5:   2007         0        -1         2007  0.93465627 0.1059910      751 #>  6:   2007         1        -1         2008  2.08052015 0.1113721      751 #>  7:   2007         2        -1         2009  2.85715481 0.1119331      501 #>  8:   2007         3        -1         2010  3.94963207 0.1143283      501 #>  9:   2007         4        -1         2011  5.06524420 0.1152643      501 #> 10:   2007         5        -1         2012  6.04106888 0.1238934      251 #> 11:   2007         6        -1         2013  7.00871764 0.1287452      251 #> 12:   2010        -4        -1         2006          NA        NA      501 #> 13:   2010        -3        -1         2007          NA        NA      501 #> 14:   2010        -2        -1         2008          NA        NA      501 #> 15:   2010        -1        -1         2009          NA        NA      501 #> 16:   2010         0        -1         2010          NA        NA      501 #> 17:   2010         1        -1         2011          NA        NA      501 #> 18:   2010         2        -1         2012          NA        NA      251 #> 19:   2010         3        -1         2013          NA        NA      251 #> 20:   2012        -4        -1         2008  0.13328015 0.1207528      251 #> 21:   2012        -3        -1         2009 -0.06807637 0.1330084      251 #> 22:   2012        -2        -1         2010 -0.12891166 0.1210347      251 #> 23:   2012        -1        -1         2011  0.00000000 0.0000000      251 #> 24:   2012         0        -1         2012  4.88124205 0.1282893      251 #> 25:   2012         1        -1         2013  6.09097178 0.1207522      251 #>     Cohort EventTime BaseEvent CalendarTime       ATTge  ATTge_SE Ncontrol #>     Ntreated #>  1:      249 #>  2:      249 #>  3:      249 #>  4:      249 #>  5:      249 #>  6:      249 #>  7:      249 #>  8:      249 #>  9:      249 #> 10:      249 #> 11:      249 #> 12:        0 #> 13:        0 #> 14:        0 #> 15:        0 #> 16:        0 #> 17:        0 #> 18:        0 #> 19:        0 #> 20:      250 #> 21:      250 #> 22:      250 #> 23:      250 #> 24:      250 #> 25:      250 #>     Ntreated #>  #> $results_average #>     EventTime BaseEvent        ATTe    ATTe_SE Ncontrol Ntreated #>  1:        -4        -1  0.04681140 0.08040357     1002      499 #>  2:        -3        -1 -0.09509712 0.08487112     1002      499 #>  3:        -2        -1 -0.01903844 0.07948286     1002      499 #>  4:        -1        -1  0.00000000 0.00000000     1002      499 #>  5:         0        -1  2.91190365 0.08229441     1002      499 #>  6:         1        -1  4.08976445 0.08197644     1002      499 #>  7:         2        -1  2.85715481 0.11193314      501      249 #>  8:         3        -1  3.94963207 0.11432827      501      249 #>  9:         4        -1  5.06524420 0.11526433      501      249 #> 10:         5        -1  6.04106888 0.12389338      251      249 #> 11:         6        -1  7.00871764 0.12874515      251      249 #>  #> $results_Esets #>        Eset    ATT_Eset ATT_Eset_SE #> 1: -4,-3,-2 -0.02244139  0.06604496 #> 2:    1,2,3  3.71385701  0.07460415 #>   # simulate data with time-varying covariates sim = SimDiD(sample_size=2000,time_covars=TRUE) simdata = sim$simdata  # add the time-varying covariate names to the varnames list varnames$covariate_names = c(\"X1\",\"X2\")  # run estimation that controls for time-varying covariates DiD(simdata, varnames, min_event=1, max_event=2) #> $results_cohort #>    Cohort EventTime BaseEvent CalendarTime    ATTge   ATTge_SE Ncontrol #> 1:   2007         1        -1         2008 2.044473 0.07789969     1501 #> 2:   2007         2        -1         2009 2.977395 0.08075890     1501 #> 3:   2010         1        -1         2011 2.448898 0.07863435     1001 #> 4:   2010         2        -1         2012 3.499046 0.09328438      501 #> 5:   2012         1        -1         2013 2.964641 0.08855004      501 #>    Ntreated #> 1:      499 #> 2:      499 #> 3:      500 #> 4:      500 #> 5:      500 #>  #> $results_average #>    EventTime BaseEvent     ATTe    ATTe_SE Ncontrol Ntreated #> 1:         1        -1 2.486299 0.04688827     3003     1499 #> 2:         2        -1 3.238482 0.06138515     2002      999 #>   # run estimation that controls for time-varying covariates DiD(simdata, varnames, min_event=1, max_event=2, Esets=list(c(1,2))) #> $results_cohort #>    Cohort EventTime BaseEvent CalendarTime    ATTge   ATTge_SE Ncontrol #> 1:   2007         1        -1         2008 2.044473 0.07789969     1501 #> 2:   2007         2        -1         2009 2.977395 0.08075890     1501 #> 3:   2010         1        -1         2011 2.448898 0.07863435     1001 #> 4:   2010         2        -1         2012 3.499046 0.09328438      501 #> 5:   2012         1        -1         2013 2.964641 0.08855004      501 #>    Ntreated #> 1:      499 #> 2:      499 #> 3:      500 #> 4:      500 #> 5:      500 #>  #> $results_average #>    EventTime BaseEvent     ATTe    ATTe_SE Ncontrol Ntreated #> 1:         1        -1 2.486299 0.04688827     3003     1499 #> 2:         2        -1 3.238482 0.06138515     2002      999 #>  #> $results_Esets #>    Eset ATT_Eset ATT_Eset_SE #> 1:  1,2 2.735624  0.04369998 #>   # simulate data with time-varying covariates and missing values, re-run estimation simdata = SimDiD(sample_size=2000,time_covars=TRUE,randomNA=TRUE)$simdata DiD(simdata, varnames, min_event=1, max_event=2, Esets=list(c(1,2))) #> Warning: 411 out of 4000 observations dropped due to missing values #> Warning: 395 out of 4000 observations dropped due to missing values #> Warning: 381 out of 4000 observations dropped due to missing values #> Warning: 373 out of 4000 observations dropped due to missing values #> Warning: 392 out of 4000 observations dropped due to missing values #> $results_cohort #>    Cohort EventTime BaseEvent CalendarTime    ATTge   ATTge_SE Ncontrol #> 1:   2007         1        -1         2008 2.043935 0.08574607     1203 #> 2:   2007         2        -1         2009 3.036998 0.09017440     1205 #> 3:   2010         1        -1         2011 2.479587 0.08811958      814 #> 4:   2010         2        -1         2012 3.505381 0.10380258      401 #> 5:   2012         1        -1         2013 3.027854 0.09738600      412 #>    Ntreated #> 1:      410 #> 2:      419 #> 3:      414 #> 4:      423 #> 5:      411 #>  #> $results_average #>    EventTime BaseEvent     ATTe    ATTe_SE Ncontrol Ntreated #> 1:         1        -1 2.517417 0.05158759     2429     1235 #> 2:         2        -1 3.272302 0.06864341     1606      842 #>  #> $results_Esets #>    Eset ATT_Eset ATT_Eset_SE #> 1:  1,2 2.777014   0.0480845 #>   # simulate data with time-varying covariates and missing cohort, re-run estimation simdata = SimDiD(sample_size=2000,time_covars=TRUE,missingCohorts=2010)$simdata DiD(simdata, varnames, min_event=1, max_event=2, Esets=list(c(1,2))) #> Warning: 500 out of 4000 observations dropped due to missing values #> Warning: 500 out of 4000 observations dropped due to missing values #> The variable 'treated' has been removed because of collinearity (see $collin.var). #> Warning: 500 out of 4000 observations dropped due to missing values #> The variable 'treated' has been removed because of collinearity (see $collin.var). #> $results_cohort #>    Cohort EventTime BaseEvent CalendarTime    ATTge   ATTge_SE Ncontrol #> 1:   2007         1        -1         2008 2.044473 0.07789969     1501 #> 2:   2007         2        -1         2009 2.976880 0.08751168     1001 #> 3:   2010         1        -1         2011       NA         NA     1001 #> 4:   2010         2        -1         2012       NA         NA      501 #> 5:   2012         1        -1         2013 2.964641 0.08855004      501 #>    Ntreated #> 1:      499 #> 2:      499 #> 3:        0 #> 4:        0 #> 5:      500 #>  #> $results_average #>    EventTime BaseEvent     ATTe    ATTe_SE Ncontrol Ntreated #> 1:         1        -1 2.505018 0.05835799     2002      999 #> 2:         2        -1 2.976880 0.08751168     1001      499 #>  #> $results_Esets #>    Eset ATT_Eset ATT_Eset_SE #> 1:  1,2 2.685181   0.0555487 #>   # simulate data with clusters simdata = SimDiD(sample_size=2000,clusters=TRUE)$simdata varnames = list() varnames$time_name = \"year\" varnames$outcome_name = \"Y\" varnames$cohort_name = \"cohort\" varnames$id_name = \"id\" DiD(simdata, varnames, min_event=1, max_event=2, Esets=list(c(1,2))) #> $results_cohort #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         1        -1         2008 2.458213 0.1250941     1501      499 #> 2:   2007         2        -1         2009 3.402541 0.1192018     1501      499 #> 3:   2010         1        -1         2011 2.461523 0.1005151     1001      500 #> 4:   2010         2        -1         2012 3.459110 0.1065304      501      500 #> 5:   2012         1        -1         2013 2.942042 0.1089119      501      500 #>  #> $results_average #>    EventTime BaseEvent     ATTe    ATTe_SE Ncontrol Ntreated #> 1:         1        -1 2.620701 0.06387150     3003     1499 #> 2:         2        -1 3.430854 0.07933894     2002      999 #>  #> $results_Esets #>    Eset ATT_Eset ATT_Eset_SE #> 1:  1,2 2.830869  0.06064396 #>   # cluster SEs on the \"cluster\" variable # note: it always clusters on id_name, including when clustering on other variables varnames$cluster_names = \"cluster\" DiD(simdata, varnames, min_event=1, max_event=2, Esets=list(c(1,2))) #> $results_cohort #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         1        -1         2008 2.458213 0.2328253     1501      499 #> 2:   2007         2        -1         2009 3.402541 0.2773041     1501      499 #> 3:   2010         1        -1         2011 2.461523 0.1443002     1001      500 #> 4:   2010         2        -1         2012 3.459110 0.1760574      501      500 #> 5:   2012         1        -1         2013 2.942042 0.2135785      501      500 #>  #> $results_average #>    EventTime BaseEvent     ATTe   ATTe_SE Ncontrol Ntreated #> 1:         1        -1 2.620701 0.0904182     3003     1499 #> 2:         2        -1 3.430854 0.1568785     2002      999 #>  #> $results_Esets #>    Eset ATT_Eset ATT_Eset_SE #> 1:  1,2 2.830869   0.1101796 #>"},{"path":"https://setzler.github.io/DiDforBigData/reference/DiDge.html","id":null,"dir":"Reference","previous_headings":"","what":"Estimate DiD for a single cohort (g) and a single event time (e). — DiDge","title":"Estimate DiD for a single cohort (g) and a single event time (e). — DiDge","text":"Estimate single cohort (g) single event time (e).","code":""},{"path":"https://setzler.github.io/DiDforBigData/reference/DiDge.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Estimate DiD for a single cohort (g) and a single event time (e). — DiDge","text":"","code":"DiDge(   inputdata,   varnames,   cohort_time,   event_postperiod,   base_event = -1,   control_group = \"all\",   return_data = FALSE,   return_ATTs_only = TRUE )"},{"path":"https://setzler.github.io/DiDforBigData/reference/DiDge.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Estimate DiD for a single cohort (g) and a single event time (e). — DiDge","text":"inputdata data.table. varnames list form varnames = list(id_name, time_name, outcome_name, cohort_name), four arguments list must character corresponds variable name inputdata. cohort_time treatment cohort reference. event_postperiod Number time periods cohort time estimate . base_event base pre-period normalized zero estimation. Default base_event=-1. control_group three possibilities: control_group=\"never-treated\" uses never-treated control group ; control_group=\"future-treated\" uses units receive treatment future control group; control_group=\"\" uses never-treated future-treated control group. Default control_group=\"\". return_data true, returns treated control differenced data. Default FALSE. return_ATTs_only Return ATT estimates sample sizes. Default TRUE.","code":""},{"path":"https://setzler.github.io/DiDforBigData/reference/DiDge.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Estimate DiD for a single cohort (g) and a single event time (e). — DiDge","text":"single-row data.table() containing estimates various statistics sample size. return_data=TRUE, instead returns list data_prepost entry previously-mentioned single-row data.table(), argument data_prepost  contains constructed data provided OLS.","code":""},{"path":"https://setzler.github.io/DiDforBigData/reference/DiDge.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Estimate DiD for a single cohort (g) and a single event time (e). — DiDge","text":"","code":"# simulate some data simdata = SimDiD(sample_size=200)$simdata  # define the variable names as a list() varnames = list() varnames$time_name = \"year\" varnames$outcome_name = \"Y\" varnames$cohort_name = \"cohort\" varnames$id_name = \"id\"  # estimate the ATT for cohort 2007 at event time 1 DiDge(simdata, varnames, cohort_time=2007, event_postperiod=1) #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         1        -1         2008 1.674411 0.2372155      151       49  # change the base period to -3 DiDge(simdata, varnames, base_event=-3, cohort_time=2007, event_postperiod=1) #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         1        -3         2008 1.519178 0.2446772      151       49  # use only the never-treated control group DiDge(simdata, varnames, control_group = \"never-treated\", cohort_time=2007, event_postperiod=1) #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         1        -1         2008 1.511766 0.2896609       51       49  # use only the future-treated control group DiDge(simdata, varnames, control_group = \"future-treated\", cohort_time=2007, event_postperiod=1) #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         1        -1         2008 1.757359 0.2544108      100       49  # simulate some data with covariates, add the covariates to the varnames, update the estimates sim = SimDiD(sample_size=200,time_covars=TRUE) varnames$covariate_names = c(\"X1\",\"X2\") DiDge(inputdata=copy(sim$simdata), varnames, cohort_time=2007, event_postperiod = 3) #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         3        -1         2010 3.904177 0.2687981      101       49 varnames$covariate_names = NULL # we are done with this example  # simulate some data with clusters, add the clusters to the varnames, update the estimates sim = SimDiD(sample_size=3000, clusters=TRUE) DiDge(inputdata=copy(sim$simdata), varnames, cohort_time=2007, event_postperiod = 3) #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         3        -1         2010 3.869692 0.1045975     1501      749 varnames$cluster_names = c(\"cluster\") # now we cluster the standard errors: DiDge(inputdata=copy(sim$simdata), varnames, cohort_time=2007, event_postperiod = 3) #>    Cohort EventTime BaseEvent CalendarTime    ATTge  ATTge_SE Ncontrol Ntreated #> 1:   2007         3        -1         2010 3.869692 0.3275703     1501      749"},{"path":"https://setzler.github.io/DiDforBigData/reference/SimDiD.html","id":null,"dir":"Reference","previous_headings":"","what":"DiD data simulator with staggered treatment. — SimDiD","title":"DiD data simulator with staggered treatment. — SimDiD","text":"Simulate data model Y_it =  alpha_i + mu_t + ATT*(t >= G_i) + epsilon_it, individual, t year, G_i cohort. ATT formula ATTat0 + EventTime*ATTgrowth + \\*cohort_counter\\*ATTcohortdiff, cohort_counter order treated cohort (first, second, etc.).","code":""},{"path":"https://setzler.github.io/DiDforBigData/reference/SimDiD.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"DiD data simulator with staggered treatment. — SimDiD","text":"","code":"SimDiD(   seed = 1,   sample_size = 100,   cohorts = c(2007, 2010, 2012),   ATTat0 = 1,   ATTgrowth = 1,   ATTcohortdiff = 0.5,   anticipation = 0,   minyear = 2003,   maxyear = 2013,   idvar = 1,   yearvar = 1,   shockvar = 1,   indivAR1 = FALSE,   time_covars = FALSE,   clusters = FALSE,   markets = FALSE,   randomNA = FALSE,   missingCohorts = NULL )"},{"path":"https://setzler.github.io/DiDforBigData/reference/SimDiD.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"DiD data simulator with staggered treatment. — SimDiD","text":"seed Set random seed. Default seed=1. sample_size Number individuals. Default sample_size=100. cohorts Vector years treatment onset occurs. Default cohorts=c(2007,2010,2012). ATTat0 Treatment effect event time 0. Default 1. ATTgrowth Increment ATT event time 0. Default 1. ATTcohortdiff Incrememnt ATT cohort. Default 0.5. anticipation Number years prior cohort allow 50% treatment effects. Default anticipation=0. minyear Minimum calendar year include data. Default minyear=2003. maxyear Maximum calendar year include data. Default maxyear=2013. idvar Variance individual fixed effects (alpha_i). Default idvar=1. yearvar Variance year effects (mu_i). Default yearvar=1. shockvar Variance idiosyncratic shocks (epsilon_it). Default shockvar=1. indivAR1 individual's shocks follow AR(1) process. Default FALSE. time_covars Add 2 time-varying covariates, called \"X1\" \"X2\". Default FALSE. clusters Add 10 randomly assigned clusters, cluster-specific AR(1) shocks. Default FALSE. markets Add 10 randomly assigned markets, market-specific shocks systematically greater markets treated earlier. Default FALSE. randomNA TRUE, randomly assign outcome variable missing values (NA) cases. Default FALSE. missingCohorts set particular cohort (vector cohorts), outcomes cohort event time -1 set missing. Default NULL.","code":""},{"path":"https://setzler.github.io/DiDforBigData/reference/SimDiD.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"DiD data simulator with staggered treatment. — SimDiD","text":"list two data.tables. first data.table simulated data variables (id, year, cohort, Y), Y outcome variable. second data.table contains true ATT values, (event,cohort) level event averaging across cohorts.","code":""},{"path":"https://setzler.github.io/DiDforBigData/reference/SimDiD.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"DiD data simulator with staggered treatment. — SimDiD","text":"","code":"# simulate data with default options SimDiD() #> $simdata #>        id year cohort         Y #>    1:   1 2003   2012  8.058406 #>    2:   1 2004   2012 12.348703 #>    3:   1 2005   2012  7.549438 #>    4:   1 2006   2012  9.731058 #>    5:   1 2007   2012 11.269052 #>   ---                           #> 1096: 100 2009   2010  7.071765 #> 1097: 100 2010   2010 12.349172 #> 1098: 100 2011   2010 13.647523 #> 1099: 100 2012   2010 13.490701 #> 1100: 100 2013   2010 12.650051 #>  #> $true_ATT #>      cohort event    ATTge #>  1:    2007     0 1.000000 #>  2:    2007     1 2.000000 #>  3:    2007     2 3.000000 #>  4:    2007     3 4.000000 #>  5:    2007     4 5.000000 #>  6:    2007     5 6.000000 #>  7:    2007     6 7.000000 #>  8:    2010     0 1.500000 #>  9:    2010     1 2.500000 #> 10:    2010     2 3.500000 #> 11:    2010     3 4.500000 #> 12:    2012     0 2.000000 #> 13:    2012     1 3.000000 #> 14: Average     0 1.506757 #> 15: Average     1 2.506757 #> 16: Average     2 3.255102 #> 17: Average     3 4.255102 #> 18: Average     4 5.000000 #> 19: Average     5 6.000000 #> 20: Average     6 7.000000 #>   # change the random seed SimDiD(seed=123) #> $simdata #>        id year cohort         Y #>    1:   1 2003    Inf 10.975366 #>    2:   1 2004    Inf  9.928304 #>    3:   1 2005    Inf 13.326225 #>    4:   1 2006    Inf 10.238570 #>    5:   1 2007    Inf 11.675520 #>   ---                           #> 1096: 100 2009   2012  9.828756 #> 1097: 100 2010   2012 11.920037 #> 1098: 100 2011   2012 10.924002 #> 1099: 100 2012   2012 13.151364 #> 1100: 100 2013   2012 13.329865 #>  #> $true_ATT #>      cohort event    ATTge #>  1:    2007     0 1.000000 #>  2:    2007     1 2.000000 #>  3:    2007     2 3.000000 #>  4:    2007     3 4.000000 #>  5:    2007     4 5.000000 #>  6:    2007     5 6.000000 #>  7:    2007     6 7.000000 #>  8:    2010     0 1.500000 #>  9:    2010     1 2.500000 #> 10:    2010     2 3.500000 #> 11:    2010     3 4.500000 #> 12:    2012     0 2.000000 #> 13:    2012     1 3.000000 #> 14: Average     0 1.506757 #> 15: Average     1 2.506757 #> 16: Average     2 3.255102 #> 17: Average     3 4.255102 #> 18: Average     4 5.000000 #> 19: Average     5 6.000000 #> 20: Average     6 7.000000 #>   # increase sample size SimDiD(sample_size=200) #> $simdata #>        id year cohort         Y #>    1:   1 2003    Inf  9.916155 #>    2:   1 2004    Inf 12.095935 #>    3:   1 2005    Inf 10.183453 #>    4:   1 2006    Inf 13.995163 #>    5:   1 2007    Inf 11.806494 #>   ---                           #> 2196: 200 2009   2007 15.742248 #> 2197: 200 2010   2007 14.753802 #> 2198: 200 2011   2007 15.422272 #> 2199: 200 2012   2007 15.432962 #> 2200: 200 2013   2007 17.223699 #>  #> $true_ATT #>      cohort event    ATTge #>  1:    2007     0 1.000000 #>  2:    2007     1 2.000000 #>  3:    2007     2 3.000000 #>  4:    2007     3 4.000000 #>  5:    2007     4 5.000000 #>  6:    2007     5 6.000000 #>  7:    2007     6 7.000000 #>  8:    2010     0 1.500000 #>  9:    2010     1 2.500000 #> 10:    2010     2 3.500000 #> 11:    2010     3 4.500000 #> 12:    2012     0 2.000000 #> 13:    2012     1 3.000000 #> 14: Average     0 1.503356 #> 15: Average     1 2.503356 #> 16: Average     2 3.252525 #> 17: Average     3 4.252525 #> 18: Average     4 5.000000 #> 19: Average     5 6.000000 #> 20: Average     6 7.000000 #>   # increase the initial ATT for the first treated cohort SimDiD(ATTat0=2) #> $simdata #>        id year cohort         Y #>    1:   1 2003   2012  8.058406 #>    2:   1 2004   2012 12.348703 #>    3:   1 2005   2012  7.549438 #>    4:   1 2006   2012  9.731058 #>    5:   1 2007   2012 11.269052 #>   ---                           #> 1096: 100 2009   2010  7.071765 #> 1097: 100 2010   2010 13.349172 #> 1098: 100 2011   2010 14.647523 #> 1099: 100 2012   2010 14.490701 #> 1100: 100 2013   2010 13.650051 #>  #> $true_ATT #>      cohort event    ATTge #>  1:    2007     0 2.000000 #>  2:    2007     1 3.000000 #>  3:    2007     2 4.000000 #>  4:    2007     3 5.000000 #>  5:    2007     4 6.000000 #>  6:    2007     5 7.000000 #>  7:    2007     6 8.000000 #>  8:    2010     0 2.500000 #>  9:    2010     1 3.500000 #> 10:    2010     2 4.500000 #> 11:    2010     3 5.500000 #> 12:    2012     0 3.000000 #> 13:    2012     1 4.000000 #> 14: Average     0 2.506757 #> 15: Average     1 3.506757 #> 16: Average     2 4.255102 #> 17: Average     3 5.255102 #> 18: Average     4 6.000000 #> 19: Average     5 7.000000 #> 20: Average     6 8.000000 #>   # change cross-time and cross-cohort ATT variation # note: the formula is ATTat0 + EventTime*ATTgrowth SimDiD(ATTgrowth=2,ATTcohortdiff=3) #> $simdata #>        id year cohort         Y #>    1:   1 2003   2012  8.058406 #>    2:   1 2004   2012 12.348703 #>    3:   1 2005   2012  7.549438 #>    4:   1 2006   2012  9.731058 #>    5:   1 2007   2012 11.269052 #>   ---                           #> 1096: 100 2009   2010  7.071765 #> 1097: 100 2010   2010 14.849172 #> 1098: 100 2011   2010 17.147523 #> 1099: 100 2012   2010 17.990701 #> 1100: 100 2013   2010 18.150051 #>  #> $true_ATT #>      cohort event     ATTge #>  1:    2007     0  1.000000 #>  2:    2007     1  3.000000 #>  3:    2007     2  5.000000 #>  4:    2007     3  7.000000 #>  5:    2007     4  9.000000 #>  6:    2007     5 11.000000 #>  7:    2007     6 13.000000 #>  8:    2010     0  4.000000 #>  9:    2010     1  6.000000 #> 10:    2010     2  8.000000 #> 11:    2010     3 10.000000 #> 12:    2012     0  7.000000 #> 13:    2012     1  9.000000 #> 14: Average     0  4.040541 #> 15: Average     1  6.040541 #> 16: Average     2  6.530612 #> 17: Average     3  8.530612 #> 18: Average     4  9.000000 #> 19: Average     5 11.000000 #> 20: Average     6 13.000000 #>   # change the range of years considered and treatment cohorts SimDiD(minyear=1994, maxyear=1999, cohorts=c(1995,1996)) #> $simdata #>       id year cohort         Y #>   1:   1 1994   1996  8.324911 #>   2:   1 1995   1996 11.814148 #>   3:   1 1996   1996 10.233306 #>   4:   1 1997   1996 13.740197 #>   5:   1 1998   1996 12.364984 #>  ---                           #> 596: 100 1995   1996 12.435341 #> 597: 100 1996   1996 10.289332 #> 598: 100 1997   1996 11.745367 #> 599: 100 1998   1996 12.976739 #> 600: 100 1999   1996 12.088275 #>  #> $true_ATT #>      cohort event ATTge #>  1:    1995     0  1.00 #>  2:    1995     1  2.00 #>  3:    1995     2  3.00 #>  4:    1995     3  4.00 #>  5:    1995     4  5.00 #>  6:    1996     0  1.50 #>  7:    1996     1  2.50 #>  8:    1996     2  3.50 #>  9:    1996     3  4.50 #> 10: Average     0  1.25 #> 11: Average     1  2.25 #> 12: Average     2  3.25 #> 13: Average     3  4.25 #> 14: Average     4  5.00 #>   # add two periods of anticipation prior to treatment. The effect will be 0.5*ATTat0. SimDiD(anticipation=2) #> $simdata #>        id year cohort         Y #>    1:   1 2003   2012  8.058406 #>    2:   1 2004   2012 12.348703 #>    3:   1 2005   2012  7.549438 #>    4:   1 2006   2012  9.731058 #>    5:   1 2007   2012 11.269052 #>   ---                           #> 1096: 100 2009   2010  7.571765 #> 1097: 100 2010   2010 12.349172 #> 1098: 100 2011   2010 13.647523 #> 1099: 100 2012   2010 13.490701 #> 1100: 100 2013   2010 12.650051 #>  #> $true_ATT #>      cohort event    ATTge #>  1:    2007    -2 0.500000 #>  2:    2007    -1 0.500000 #>  3:    2007     0 1.000000 #>  4:    2007     1 2.000000 #>  5:    2007     2 3.000000 #>  6:    2007     3 4.000000 #>  7:    2007     4 5.000000 #>  8:    2007     5 6.000000 #>  9:    2007     6 7.000000 #> 10:    2010    -2 0.500000 #> 11:    2010    -1 0.500000 #> 12:    2010     0 1.500000 #> 13:    2010     1 2.500000 #> 14:    2010     2 3.500000 #> 15:    2010     3 4.500000 #> 16:    2012    -2 0.500000 #> 17:    2012    -1 0.500000 #> 18:    2012     0 2.000000 #> 19:    2012     1 3.000000 #> 20: Average    -2 0.500000 #> 21: Average    -1 0.500000 #> 22: Average     0 1.506757 #> 23: Average     1 2.506757 #> 24: Average     2 3.255102 #> 25: Average     3 4.255102 #> 26: Average     4 5.000000 #> 27: Average     5 6.000000 #> 28: Average     6 7.000000 #>      cohort event    ATTge #>   # add covariates \"X1\" and \"X2\", which vary over time differentially by cohort. SimDiD(time_covars=TRUE) #> $simdata #>        id year cohort         Y          X1          X2 #>    1:   1 2003   2012 14.256933 -3.69550292  2.50302353 #>    2:   1 2004   2012 17.874436 -3.80398827  1.72174457 #>    3:   1 2005   2012 12.261336 -3.33934345  1.37255519 #>    4:   1 2006   2012 12.064172 -0.73485586  1.59825808 #>    5:   1 2007   2012 12.691232 -0.06022631  1.36195377 #>   ---                                                   #> 1096: 100 2009   2010  5.871112  1.18163056 -0.01902207 #> 1097: 100 2010   2010 11.615832  1.93069848  1.19735833 #> 1098: 100 2011   2010 11.933958  2.70553461  0.99196922 #> 1099: 100 2012   2010  6.879272  5.41403034 -1.19739883 #> 1100: 100 2013   2010  9.111691  6.09999773  2.56163746 #>  #> $true_ATT #>      cohort event    ATTge #>  1:    2007     0 1.000000 #>  2:    2007     1 2.000000 #>  3:    2007     2 3.000000 #>  4:    2007     3 4.000000 #>  5:    2007     4 5.000000 #>  6:    2007     5 6.000000 #>  7:    2007     6 7.000000 #>  8:    2010     0 1.500000 #>  9:    2010     1 2.500000 #> 10:    2010     2 3.500000 #> 11:    2010     3 4.500000 #> 12:    2012     0 2.000000 #> 13:    2012     1 3.000000 #> 14: Average     0 1.506757 #> 15: Average     1 2.506757 #> 16: Average     2 3.255102 #> 17: Average     3 4.255102 #> 18: Average     4 5.000000 #> 19: Average     5 6.000000 #> 20: Average     6 7.000000 #>   # add clusters called \"cluster\", which are time-invariant and subject to common shocks. # note: shocks are randomly assigned to clusters, so parallel trends is not violated. SimDiD(clusters=TRUE) #> $simdata #>        id year cohort         Y cluster #>    1:   1 2003   2012  9.009133       2 #>    2:   1 2004   2012 14.009706       2 #>    3:   1 2005   2012 12.019513       2 #>    4:   1 2006   2012 11.912093       2 #>    5:   1 2007   2012 11.691422       2 #>   ---                                   #> 1096: 100 2009   2010 10.062813       8 #> 1097: 100 2010   2010 13.625028       8 #> 1098: 100 2011   2010 13.245403       8 #> 1099: 100 2012   2010 13.482591       8 #> 1100: 100 2013   2010 12.090760       8 #>  #> $true_ATT #>      cohort event    ATTge #>  1:    2007     0 1.000000 #>  2:    2007     1 2.000000 #>  3:    2007     2 3.000000 #>  4:    2007     3 4.000000 #>  5:    2007     4 5.000000 #>  6:    2007     5 6.000000 #>  7:    2007     6 7.000000 #>  8:    2010     0 1.500000 #>  9:    2010     1 2.500000 #> 10:    2010     2 3.500000 #> 11:    2010     3 4.500000 #> 12:    2012     0 2.000000 #> 13:    2012     1 3.000000 #> 14: Average     0 1.506757 #> 15: Average     1 2.506757 #> 16: Average     2 3.255102 #> 17: Average     3 4.255102 #> 18: Average     4 5.000000 #> 19: Average     5 6.000000 #> 20: Average     6 7.000000 #>   # add clusters called \"market\", which are time-invariant and subject to common shocks. # note: earlier-treated markets tend to get better shocks, which violates parallel trends. SimDiD(markets=TRUE) #> $simdata #>        id year cohort         Y market #>    1:   1 2003   2012  7.858406      2 #>    2:   1 2004   2012 12.148703      2 #>    3:   1 2005   2012  7.349438      2 #>    4:   1 2006   2012  9.531058      2 #>    5:   1 2007   2012 11.069052      2 #>   ---                                  #> 1096: 100 2009   2010  5.471765      8 #> 1097: 100 2010   2010 10.749172      8 #> 1098: 100 2011   2010 12.047523      8 #> 1099: 100 2012   2010 11.890701      8 #> 1100: 100 2013   2010 11.050051      8 #>  #> $true_ATT #>      cohort event    ATTge #>  1:    2007     0 1.000000 #>  2:    2007     1 2.000000 #>  3:    2007     2 3.000000 #>  4:    2007     3 4.000000 #>  5:    2007     4 5.000000 #>  6:    2007     5 6.000000 #>  7:    2007     6 7.000000 #>  8:    2010     0 1.500000 #>  9:    2010     1 2.500000 #> 10:    2010     2 3.500000 #> 11:    2010     3 4.500000 #> 12:    2012     0 2.000000 #> 13:    2012     1 3.000000 #> 14: Average     0 1.506757 #> 15: Average     1 2.506757 #> 16: Average     2 3.255102 #> 17: Average     3 4.255102 #> 18: Average     4 5.000000 #> 19: Average     5 6.000000 #> 20: Average     6 7.000000 #>   # randomly set 10% of outcomes to missing. SimDiD(randomNA=TRUE) #> $simdata #>        id year cohort         Y #>    1:   1 2003   2012  8.058406 #>    2:   1 2004   2012 12.348703 #>    3:   1 2005   2012  7.549438 #>    4:   1 2006   2012  9.731058 #>    5:   1 2007   2012 11.269052 #>   ---                           #> 1096: 100 2009   2010  7.071765 #> 1097: 100 2010   2010 12.349172 #> 1098: 100 2011   2010 13.647523 #> 1099: 100 2012   2010 13.490701 #> 1100: 100 2013   2010 12.650051 #>  #> $true_ATT #>      cohort event    ATTge #>  1:    2007     0 1.000000 #>  2:    2007     1 2.000000 #>  3:    2007     2 3.000000 #>  4:    2007     3 4.000000 #>  5:    2007     4 5.000000 #>  6:    2007     5 6.000000 #>  7:    2007     6 7.000000 #>  8:    2010     0 1.500000 #>  9:    2010     1 2.500000 #> 10:    2010     2 3.500000 #> 11:    2010     3 4.500000 #> 12:    2012     0 2.000000 #> 13:    2012     1 3.000000 #> 14: Average     0 1.506757 #> 15: Average     1 2.506757 #> 16: Average     2 3.255102 #> 17: Average     3 4.255102 #> 18: Average     4 5.000000 #> 19: Average     5 6.000000 #> 20: Average     6 7.000000 #>   # set cohort 2010 outcome to missing at event time -1. SimDiD(missingCohorts=2010)$simdata[cohort==2010 & year==2009] #>      id year cohort  Y #>  1:  18 2009   2010 NA #>  2:  22 2009   2010 NA #>  3:  23 2009   2010 NA #>  4:  24 2009   2010 NA #>  5:  29 2009   2010 NA #>  6:  30 2009   2010 NA #>  7:  38 2009   2010 NA #>  8:  40 2009   2010 NA #>  9:  46 2009   2010 NA #> 10:  48 2009   2010 NA #> 11:  50 2009   2010 NA #> 12:  60 2009   2010 NA #> 13:  61 2009   2010 NA #> 14:  68 2009   2010 NA #> 15:  70 2009   2010 NA #> 16:  71 2009   2010 NA #> 17:  72 2009   2010 NA #> 18:  77 2009   2010 NA #> 19:  83 2009   2010 NA #> 20:  84 2009   2010 NA #> 21:  90 2009   2010 NA #> 22:  92 2009   2010 NA #> 23:  96 2009   2010 NA #> 24:  98 2009   2010 NA #> 25: 100 2009   2010 NA #>      id year cohort  Y"},{"path":"https://setzler.github.io/DiDforBigData/news/index.html","id":"didforbigdata-03","dir":"Changelog","previous_headings":"","what":"DiDforBigData 0.3","title":"DiDforBigData 0.3","text":"First public release. Add progress bar predict long estimation take. Simplify package 3 functions: , DiDge, SimDiD.","code":""},{"path":"https://setzler.github.io/DiDforBigData/news/index.html","id":"didforbigdata-02","dir":"Changelog","previous_headings":"","what":"DiDforBigData 0.2","title":"DiDforBigData 0.2","text":"Add support robust clustered standard errors. Add support high-dimensional fixed-effect covariates.","code":""},{"path":"https://setzler.github.io/DiDforBigData/news/index.html","id":"didforbigdata-01","dir":"Changelog","previous_headings":"","what":"DiDforBigData 0.1","title":"DiDforBigData 0.1","text":"Add support time-varying covariates. Initialize simple estimation framework.","code":""}]
